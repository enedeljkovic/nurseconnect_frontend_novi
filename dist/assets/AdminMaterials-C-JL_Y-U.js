import{_ as v,c as i,a as r,b as h,d as j,F as u,r as _,f as c,g as f,h as p,o as s,t as m,i as k}from"./index-DVPIYTm0.js";const y={name:"AdminMaterials",setup(){const d=c({}),t=c([]),l=c(""),a=async()=>{try{const o=await p.get("http://localhost:3001/materials"),e={};o.data.forEach(n=>{e[n.subject]||(e[n.subject]=[]),e[n.subject].push(n)}),d.value=e,t.value=Object.keys(e),l.value=t.value[0]||""}catch(o){console.error("❌ Greška pri dohvaćanju materijala:",o)}},b=async o=>{if(confirm("Jeste li sigurni da želite obrisati ovaj materijal?"))try{await p.delete(`http://localhost:3001/materials/${o}`),a()}catch(e){console.error("❌ Greška pri brisanju materijala:",e)}};return f(a),{materijaliPoPredmetima:d,predmeti:t,odabraniPredmet:l,obrisiMaterial:b}}},g={class:"container my-5"},P={key:0,class:"alert alert-warning text-center"},x={key:1},M={key:0},w={class:"row g-4"},O={class:"card shadow-sm h-100"},z={class:"card-body"},B={class:"card-title"},U={class:"card-text"},V=["href"],A=["onClick"],C={key:1,class:"text-center text-muted"};function D(d,t,l,a,b,o){return s(),i("div",g,[t[4]||(t[4]=r("h2",{class:"mb-4 text-center text-primary"},"📚 Upravljanje materijalima po predmetima",-1)),a.predmeti.length===0?(s(),i("div",P," Trenutno nema dostupnih materijala. ")):(s(),i("div",x,[h(r("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.odabraniPredmet=e),class:"form-select mb-4"},[t[1]||(t[1]=r("option",{disabled:"",value:""},"⬇ Odaberi predmet",-1)),(s(!0),i(u,null,_(a.predmeti,e=>(s(),i("option",{key:e},m(e),1))),128))],512),[[j,a.odabraniPredmet]]),a.odabraniPredmet&&a.materijaliPoPredmetima[a.odabraniPredmet]?(s(),i("div",M,[r("div",w,[(s(!0),i(u,null,_(a.materijaliPoPredmetima[a.odabraniPredmet],e=>(s(),i("div",{class:"col-md-6",key:e.id},[r("div",O,[r("div",z,[r("h5",B,m(e.naziv),1),r("p",U,[t[2]||(t[2]=r("strong",null,"Opis:",-1)),k(" "+m(e.opis),1)]),r("a",{href:e.fileUrl,target:"_blank",class:"btn btn-outline-primary btn-sm me-2"}," 📄 Otvori datoteku ",8,V),r("button",{onClick:n=>a.obrisiMaterial(e.id),class:"btn btn-outline-danger btn-sm"},"🗑 Obriši",8,A)])])]))),128))])])):(s(),i("div",C,t[3]||(t[3]=[r("p",null,"Odaberi predmet za prikaz materijala.",-1)])))]))])}const F=v(y,[["render",D],["__scopeId","data-v-b1da6d0a"]]);export{F as default};
