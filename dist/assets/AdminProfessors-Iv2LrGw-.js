import{_ as b,c as r,a as e,t as l,b as m,v as h,F as u,r as p,e as v,h as c,o as d,k as f}from"./index-DVPIYTm0.js";const k={name:"AdminProfessors",data(){return{profesori:[],sviPredmeti:[],ime:"",prezime:"",email:"",kod:"",odabraniPredmeti:[],editMode:!1,editId:null}},methods:{async dohvatiProfesore(){try{const o=await c.get("http://localhost:3001/profesori-sve");this.profesori=o.data}catch(o){console.error("Greška pri dohvaćanju profesora:",o)}},async dohvatiPredmete(){try{const o=await c.get("http://localhost:3001/subjects");this.sviPredmeti=o.data}catch(o){console.error("Greška pri dohvaćanju predmeta:",o)}},async dodajProfesora(){if(!this.ime||!this.prezime||!this.email||!this.kod||this.odabraniPredmeti.length===0){alert("Molimo ispuni sva polja i odaberi barem jedan predmet.");return}try{await c.post("http://localhost:3001/profesori",{ime:this.ime,prezime:this.prezime,email:this.email,kod:this.kod,subjectIds:this.odabraniPredmeti}),this.resetForm(),this.dohvatiProfesore()}catch(o){console.error("Greška pri dodavanju profesora:",o)}},urediProfesora(o){this.editMode=!0,this.editId=o.id,this.ime=o.ime,this.prezime=o.prezime,this.email=o.email,this.kod=o.kod,this.odabraniPredmeti=o.Subjects.map(t=>t.id)},async spremiIzmjene(){try{await c.put(`http://localhost:3001/profesori/${this.editId}`,{ime:this.ime,prezime:this.prezime,email:this.email,kod:this.kod,subjectIds:this.odabraniPredmeti}),this.resetForm(),this.dohvatiProfesore()}catch(o){console.error("Greška pri spremanju izmjena:",o)}},async obrisiProfesora(o){if(confirm("Jesi siguran da želiš obrisati ovog profesora?"))try{await c.delete(`http://localhost:3001/profesori/${o}`),this.dohvatiProfesore()}catch(t){console.error("Greška pri brisanju profesora:",t)}},ponistiIzmjene(){this.resetForm()},resetForm(){this.ime=this.prezime=this.email=this.kod="",this.odabraniPredmeti=[],this.editMode=!1,this.editId=null}},mounted(){this.dohvatiProfesore(),this.dohvatiPredmete()}},P={class:"container my-5"},_={class:"card p-4 mb-4 shadow-sm"},y={class:"mb-3 text-secondary"},j={class:"row g-2 mb-3"},z={class:"col-md-3"},x={class:"col-md-3"},I={class:"col-md-3"},g={class:"col-md-3"},w={class:"mb-3"},M={class:"row"},C={class:"form-check"},U=["value","id"],V=["for"],F={class:"d-flex gap-2"},G={class:"card p-4 shadow-sm"},D={class:"table table-bordered table-hover"},S={class:"mb-0"},A=["onClick"],B=["onClick"];function E(o,t,K,N,i,a){return d(),r("div",P,[t[10]||(t[10]=e("h2",{class:"mb-4 text-center text-primary"},"🧑‍🏫 Upravljanje profesorima",-1)),e("div",_,[e("h5",y,l(i.editMode?"✏️ Uredi profesora":"➕ Dodaj novog profesora"),1),e("div",j,[e("div",z,[m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.ime=s),type:"text",class:"form-control",placeholder:"Ime"},null,512),[[h,i.ime]])]),e("div",x,[m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.prezime=s),type:"text",class:"form-control",placeholder:"Prezime"},null,512),[[h,i.prezime]])]),e("div",I,[m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>i.email=s),type:"email",class:"form-control",placeholder:"Email"},null,512),[[h,i.email]])]),e("div",g,[m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>i.kod=s),type:"text",class:"form-control",placeholder:"Kod"},null,512),[[h,i.kod]])])]),e("div",w,[t[7]||(t[7]=e("label",{class:"form-label"},"📘 Odaberi predmete:",-1)),e("div",M,[(d(!0),r(u,null,p(i.sviPredmeti,s=>(d(),r("div",{class:"col-md-4 mb-2",key:s.id},[e("div",C,[m(e("input",{class:"form-check-input",type:"checkbox",value:s.id,"onUpdate:modelValue":t[4]||(t[4]=n=>i.odabraniPredmeti=n),id:"p"+s.id},null,8,U),[[f,i.odabraniPredmeti]]),e("label",{class:"form-check-label",for:"p"+s.id},l(s.naziv),9,V)])]))),128))])]),e("div",F,[e("button",{class:"btn btn-success",onClick:t[5]||(t[5]=s=>i.editMode?a.spremiIzmjene():a.dodajProfesora())},l(i.editMode?"💾 Spremi":"✅ Dodaj"),1),i.editMode?(d(),r("button",{key:0,class:"btn btn-secondary",onClick:t[6]||(t[6]=(...s)=>a.ponistiIzmjene&&a.ponistiIzmjene(...s))},"❌ Odustani")):v("",!0)])]),e("div",G,[t[9]||(t[9]=e("h5",{class:"mb-3 text-secondary"},"📋 Popis profesora",-1)),e("table",D,[t[8]||(t[8]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Ime"),e("th",null,"Prezime"),e("th",null,"Email"),e("th",null,"Kod"),e("th",null,"Predmeti"),e("th",null,"Akcije")])],-1)),e("tbody",null,[(d(!0),r(u,null,p(i.profesori,s=>(d(),r("tr",{key:s.id},[e("td",null,l(s.ime),1),e("td",null,l(s.prezime),1),e("td",null,l(s.email),1),e("td",null,l(s.kod),1),e("td",null,[e("ul",S,[(d(!0),r(u,null,p(s.Subjects,n=>(d(),r("li",{key:n.id},l(n.naziv),1))),128))])]),e("td",null,[e("button",{class:"btn btn-warning btn-sm me-2",onClick:n=>a.urediProfesora(s)},"✏️",8,A),e("button",{class:"btn btn-danger btn-sm",onClick:n=>a.obrisiProfesora(s.id)},"🗑️",8,B)])]))),128))])])])])}const J=b(k,[["render",E],["__scopeId","data-v-4b862350"]]);export{J as default};
