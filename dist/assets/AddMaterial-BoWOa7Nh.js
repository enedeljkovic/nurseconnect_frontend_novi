import{_ as f,c,l as j,a as e,m as y,n as z,t as x,b as n,v as p,d as M,w as U,p as w,f as s,h as v,u as g,o as k,i as D}from"./index-DVPIYTm0.js";const V={name:"AddMaterial",setup(){const u=w(),a=g(),i=u.query.predmet||"",t=s(""),d=s(""),m=s(""),o=s(null),l=s("");return{naziv:t,opis:d,imageUrl:m,file:o,predmet:i,razred:l,handleFile:r=>{o.value=r.target.files[0]},submitMaterial:async()=>{try{let r="";if(o.value){const b=new FormData;b.append("file",o.value),r=(await v.post("http://localhost:3001/upload",b)).data.fileUrl}await v.post("http://localhost:3001/materials",{naziv:t.value,opis:d.value,imageUrl:m.value,fileUrl:r,subject:i,razred:l.value}),a.push({name:"SubjectMaterials",params:{predmet:i}})}catch(r){console.error("Greška pri dodavanju materijala:",r),alert("❌ Greška pri dodavanju materijala.")}}}}},F={class:"container my-5"},S={class:"text-primary mb-4"},B={class:"mb-3"},C={class:"mb-3"},N={class:"mb-3"},q={class:"mb-3"},A={class:"mb-3"};function R(u,a,i,t,d,m){const o=z("router-link");return k(),c("div",F,[j(o,{to:{name:"SubjectMaterials",params:{predmet:t.predmet}},class:"btn btn-outline-secondary mb-3"},{default:y(()=>a[6]||(a[6]=[D(" ⬅ Natrag na materijale ")])),_:1},8,["to"]),e("h2",S,"Dodaj novi materijal za predmet: "+x(t.predmet),1),e("form",{onSubmit:a[5]||(a[5]=U((...l)=>t.submitMaterial&&t.submitMaterial(...l),["prevent"])),class:"bg-white p-4 shadow rounded"},[e("div",B,[a[7]||(a[7]=e("label",{class:"form-label"},"Naziv materijala",-1)),n(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>t.naziv=l),type:"text",class:"form-control",required:""},null,512),[[p,t.naziv]])]),e("div",C,[a[8]||(a[8]=e("label",{class:"form-label"},"Opis materijala",-1)),n(e("textarea",{"onUpdate:modelValue":a[1]||(a[1]=l=>t.opis=l),class:"form-control",required:""},null,512),[[p,t.opis]])]),e("div",N,[a[10]||(a[10]=e("label",{class:"form-label"},"Razred",-1)),n(e("select",{"onUpdate:modelValue":a[2]||(a[2]=l=>t.razred=l),class:"form-select",required:""},a[9]||(a[9]=[e("option",{disabled:"",value:""},"Odaberi razred",-1),e("option",{value:"A"},"A",-1),e("option",{value:"B"},"B",-1),e("option",{value:"C"},"C",-1)]),512),[[M,t.razred]])]),e("div",q,[a[11]||(a[11]=e("label",{class:"form-label"},"Slika (opcionalno – URL)",-1)),n(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>t.imageUrl=l),type:"text",class:"form-control",placeholder:"https://..."},null,512),[[p,t.imageUrl]])]),e("div",A,[a[12]||(a[12]=e("label",{class:"form-label"},"PDF datoteka",-1)),e("input",{type:"file",onChange:a[4]||(a[4]=(...l)=>t.handleFile&&t.handleFile(...l)),class:"form-control",accept:".pdf"},null,32)]),a[13]||(a[13]=e("button",{type:"submit",class:"btn btn-primary w-100"},"✅ Dodaj materijal",-1))],32)])}const I=f(V,[["render",R],["__scopeId","data-v-e5b9bd6c"]]);export{I as default};
